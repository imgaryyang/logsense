#**
 *  Display facets based on field values
 *  e.g.: fields specified by &facet.field=
 *#

#if($response.facetFields)
  <h2 #annTitle("Facets generated by adding &facet.field= to the request")>
    Field Facets
  </h2>
  #foreach($field in $response.facetFields)
    ## Hide facets without value
    #if($field.values.size() > 0)
      	<div class="facet-field">$field.name</div>
      	#if ($field.name.equalsIgnoreCase('catExact'))
      		<ul>
      	#else
      		<ul class="facet">
      	#end
	        #foreach($facet in $field.values)
	          <li title="$facet.name">
	            <a href="#url_for_facet_filter($field.name, $facet.name)">$facet.name</a> ($facet.count)
	          </li>
	        #end
      	</ul>
    #end  ## end if > 0
  #end    ## end for each facet field
#end      ## end if response has facet fields
<style>
.btn_less{
    display:none;
}â€‹
</style>
<script type="text/javascript">

$(document).ready(function(){
    $('.facet').each(function () {

	  if ($(this).children().length > 4) {
	
		// gt index starts at 0, so gt(3) is the 4th elem
	    $(this).children('li:gt(3)').hide();
	    $(this).after('<a href="#" class="showhideul">More/Less</a><br/>');
	  }
});
$('.showhideul').click(function (e) {
	  e.preventDefault();
	  $(this).prev('ul.facet').children('li:gt(3)').toggle('slow');
	  $('ul.facet').not($(this).prev('ul.facet')).each(function () {
	     $(this).children('li:gt(3)').hide();
	  });
});
});
</script>

<style>
.showhideul {
	font-size: 10px;
	margin-left: 12px;
}
.facet-field {
	margin-top: 5px; padding-top: 5px;
}
</style>
